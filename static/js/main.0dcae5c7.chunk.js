(this["webpackJsonpphilosopher-desk"]=this["webpackJsonpphilosopher-desk"]||[]).push([[0],{195:function(e,t,n){},211:function(e,t){},213:function(e,t){},224:function(e,t){},226:function(e,t){},253:function(e,t){},255:function(e,t){},256:function(e,t){},261:function(e,t){},263:function(e,t){},282:function(e,t){},294:function(e,t){},297:function(e,t){},300:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(0),c=n.n(r),i=n(12),o=n.n(i),s=(n(195),n(113)),u=n(177),l=n(14),j={isAuthenticated:!1,signin:function(e,t,n){"buba"===t&&(j.isAuthenticated=!0,setTimeout(n,100))},signout:function(e){j.isAuthenticated=!1,setTimeout(e,100)}},h=Object(r.createContext)();function b(e){var t=e.children,n=function(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1];return{user:n,signin:function(e,t,n){return j.signin(e,t,(function(){a(e),n()}))},signout:function(e){return j.signout((function(){a(null),e()}))}}}();return Object(a.jsx)(h.Provider,{value:n,children:t})}function p(){return Object(r.useContext)(h)}var d=n(15),m=n(31),f=n(47),O=n(347),x=n(351),g=n(352),v=n(350),y=n(303),w=n(370),k=n(176),C=n(116),N=n.n(C),S=n(87),B=n.n(S),T=n(172),M=n.n(T),W=Object(O.a)((function(e){var t;return{grow:{flexGrow:1},title:(t={},Object(f.a)(t,e.breakpoints.up("sm"),{display:"block"}),Object(f.a)(t,"cursor","pointer"),t),sectionDesktop:Object(f.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(f.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function I(){var e=W(),t=Object(r.useState)(null),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(r.useState)(null),s=Object(l.a)(o,2),u=s[0],j=s[1],h=Boolean(c),b=Boolean(u),m=function(e){i(e.currentTarget)},f=function(){j(null)},O=Object(d.g)(),C=p(),S="primary-search-account-menu",T=Object(a.jsxs)(k.a,{anchorEl:c,anchorOrigin:{vertical:"top",horizontal:"right"},id:S,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:h,onClose:function(){i(null),f()},children:[Object(a.jsx)(w.a,{onClick:function(){return O.push("/profile")},children:"Profile"}),C.user?Object(a.jsx)(w.a,{onClick:function(){C.signout((function(){return O.push("/")}))},children:"Sign out"}):Object(a.jsx)(w.a,{onClick:function(){return O.push("/login")},children:"Log in"})]}),I="primary-search-account-menu-mobile",A=Object(a.jsxs)(k.a,{anchorEl:u,anchorOrigin:{vertical:"top",horizontal:"right"},id:I,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:b,onClose:f,children:[Object(a.jsxs)(w.a,{onClick:m,children:[Object(a.jsx)(v.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit",children:Object(a.jsx)(N.a,{})}),Object(a.jsx)("p",{onClick:function(){return O.push("/profile")},children:"Profile"})]}),Object(a.jsxs)(w.a,{children:[Object(a.jsx)(v.a,{"aria-label":"show 11 new notifications",color:"inherit",children:Object(a.jsx)(B.a,{})}),C.user?Object(a.jsx)("p",{onClick:function(){C.signout((function(){return O.push("/")}))},children:"Sign Out"}):Object(a.jsx)("p",{onClick:function(){return O.push("/login")},children:"Log in"})]})]});return Object(a.jsxs)("div",{className:e.grow,children:[Object(a.jsx)(x.a,{position:"fixed",children:Object(a.jsxs)(g.a,{children:[Object(a.jsx)(y.a,{className:e.title,variant:"h6",noWrap:!0,onClick:function(){return O.push("/")},children:"Philosopher desk"}),Object(a.jsx)("div",{className:e.grow}),Object(a.jsx)("div",{className:e.sectionDesktop,children:Object(a.jsx)(v.a,{edge:"end","aria-label":"account of current user","aria-controls":S,"aria-haspopup":"true",onClick:m,color:"inherit",children:Object(a.jsx)(N.a,{})})}),Object(a.jsx)("div",{className:e.sectionMobile,children:Object(a.jsx)(v.a,{"aria-label":"show more","aria-controls":I,"aria-haspopup":"true",onClick:function(e){j(e.currentTarget)},color:"inherit",children:Object(a.jsx)(M.a,{})})})]})}),A,T]})}var A=n(13),E=n.n(A),q=n(23),D=new(n(173).a)("chat-app");D.version(1).stores({chats:"&id, *host, *date",profile:"++id, name"});var P=D,z=n(179),Y=n(368),G=n(355),R=n(353),L=n(354),V=Object(O.a)((function(e){return{root:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(4),padding:e.spacing(2),width:"100%"}},button:{marginTop:e.spacing(6),marginBottom:e.spacing(4)}}})),F=function(){var e=V(),t=p(),n=Object(r.useState)(""),c=Object(l.a)(n,2),i=c[0],o=c[1],s=Object(r.useState)(!1),u=Object(l.a)(s,2),j=u[0],h=u[1],b=function(){var e=Object(q.a)(E.a.mark((function e(){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.table("profile").where("id").equalsIgnoreCase(t.user).toArray();case 2:n=e.sent,o(n[0].name);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){b()}),[]),Object(a.jsx)("div",{className:e.root,children:Object(a.jsx)(z.a,{children:Object(a.jsx)(R.a,{container:!0,children:Object(a.jsxs)(R.a,{item:!0,md:6,children:[Object(a.jsxs)(y.a,{variant:"h2",gutterBottom:!0,children:["Profifle",j?Object(a.jsx)(L.a,{}):i?": ".concat(i):""]}),Object(a.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),h(!0);var n=setTimeout((function(){P.profile.put({id:t.user,name:i}).then((function(){return h(!1)}))}),1500);return function(){return clearTimeout(n)}},children:[Object(a.jsx)(Y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Your name",name:"name",autoFocus:!0,value:i,onChange:function(e){return o(e.target.value)}}),Object(a.jsx)(G.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:!i,className:e.submit,children:"Update"})]})]})})})})},J=n(88),U=n.n(J),H=n(356),K=n(357),Q=n(360),X=n(359),Z=n(358),$=n(361),_=n(174),ee=n.n(_),te=n(202),ne={messages:[{user:"bot",message:"Hello My friend. This is a philosopher desk app that response to you with the very smart answer. In case you`re too smart it always has an option to ofer you a Google services. So treat it with patience and enjoy!"}]},ae=Object(O.a)((function(e){return{root:{flexGrow:1,margin:e.spacing(4),height:"100vh"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},floatingButton:{position:"fixed",bottom:"60px",right:"20px"}}})),re=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)({}),o=Object(l.a)(i,2),s=o[0],u=o[1],j=p(),h=Object(d.g)(),b=function(e){return Object(a.jsx)(G.a,{onClick:function(){h.replace("/chats/".concat(e.id))},size:"small",color:"primary",children:"Continue chat"})},m=function(e){return Object(a.jsx)(G.a,{onClick:function(){f(e)},size:"small",color:"primary",children:"Remove"})},f=function(e){P.table("chats").delete(e.id),O()},O=function(){var e=Object(q.a)(E.a.mark((function e(){var t,n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.chats.where("host").equalsIgnoreCase(j.user).limit(20).toArray();case 2:return t=e.sent,e.next=5,P.profile.where("id").equalsIgnoreCase(j.user).toArray();case 5:n=e.sent,u(n[0]),c(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){O()}),[]);var x=ae();return Object(a.jsxs)("div",{className:x.root,children:[Object(a.jsx)(R.a,{container:!0,spacing:3,children:n.map((function(e){return Object(a.jsx)(R.a,{item:!0,sm:12,md:4,children:Object(a.jsxs)(H.a,{className:x.card,children:[Object(a.jsxs)(K.a,{onClick:function(){h.replace("/chats/".concat(e.id))},children:[Object(a.jsx)(Z.a,{component:"img",alt:"Contemplative Reptile",height:"200",image:e.image?e.image:"/logo512.png",title:"Contemplative Reptile"}),Object(a.jsxs)(X.a,{children:[Object(a.jsx)(y.a,{gutterBottom:!0,variant:"h6",children:s.name?s.name:s.id}),Object(a.jsxs)(y.a,{variant:"body2",color:"textSecondary",component:"p",children:["Messages: ",e.messages.length]}),Object(a.jsxs)(y.a,{variant:"body2",color:"textSecondary",component:"p",children:["Created: ",U()(e.date).fromNow()]})]})]}),Object(a.jsxs)(Q.a,{children:[b(e),m(e)]})]})},e.id)}))}),Object(a.jsx)($.a,{className:x.floatingButton,color:"primary","aria-label":"add",onClick:function(){return function(e){var t;e.id=te({length:20}),e.host=j.user,e.date=new Date,e.image="https://picsum.photos/id/".concat((t=100,Math.floor(Math.random()*Math.floor(t))),"/400/300"),P.table("chats").add(e),h.replace("/chats/".concat(e.id))}(ne)},children:Object(a.jsx)(ee.a,{})})]})},ce=n(371),ie=n(362),oe=n(363),se=Object(O.a)((function(e){return{root:{display:"flex","& > *":{marginBottom:e.spacing(1)}},orange:{color:e.palette.getContrastText(ie.a[500]),backgroundColor:ie.a[500]},purple:{color:e.palette.getContrastText(oe.a[500]),backgroundColor:oe.a[500]},user:{alignSelf:"flex-end",width:"100%"},bot:{alignSelf:"flex-start",width:"100%"},messageWrapper:{padding:"20px"}}})),ue=function(e){var t=se(),n=e.message;return Object(a.jsx)(R.a,{xs:10,md:5,item:!0,className:"bot"!==n.user?t.user:t.bot,children:Object(a.jsx)(z.a,{className:t.messageWrapper,children:Object(a.jsxs)(R.a,{container:!0,children:[Object(a.jsx)(R.a,{item:!0,xs:3,children:"bot"===n.user?Object(a.jsx)(ce.a,{className:t.orange,children:"B"}):Object(a.jsx)(ce.a,{className:t.purple,children:"U"})}),Object(a.jsx)(R.a,{item:!0,xs:9,children:n.message})]})})})},le=n(364),je=n(365),he=n(175),be=n.n(he),pe={valid:!0,errorMessage:""},de=Object(O.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)},flexWrap:"nowrap",flexDirection:"column"},formWrapper:{padding:10,alignItems:"center","& .MuiGrid-item:first-of-type":{textAlign:"right"}},button:{minWidth:"unset","& .MuiButton-endIcon":{margin:0}},chatControl:{position:"fixed",bottom:0,width:"100%",left:0},bottomSpace:{marginBottom:"100px"},title:{marginTop:20,marginBottom:20,textAlign:"center"}}})),me=function(){var e=de(),t=Object(d.i)().id,n=Object(r.useRef)(),c=Object(r.useState)([]),i=Object(l.a)(c,2),o=i[0],s=i[1],u=Object(r.useState)(),j=Object(l.a)(u,2),h=j[0],b=j[1],p=Object(r.useState)(!0),m=Object(l.a)(p,2),f=m[0],O=m[1],x=Object(r.useState)(""),g=Object(l.a)(x,2),v=g[0],w=g[1],k=Object(r.useState)(pe),C=Object(l.a)(k,2),N=C[0],S=C[1],B=Object(d.g)(),T=function(){var e=Object(q.a)(E.a.mark((function e(){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.table("chats").get({id:t});case 2:n=e.sent,s(n.messages),O(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(q.a)(E.a.mark((function e(n){var a,r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.table("chats").get({id:t});case 2:return a=e.sent,(r=a.messages).push(n),P.table("chats").update(t,{messages:r}).then((function(){w(""),s(r)})),e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(q.a)(E.a.mark((function e(){var n,a,r,c,i;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.table("chats").get({id:t});case 2:return n=e.sent,a=n.messages,r=Math.floor(100*Math.random()),(c=h[r])?a.push({user:"bot",message:c}):a.push({user:"bot",message:"Try to google"}),O(!0),i=setTimeout((function(){P.table("chats").update(t,{messages:a}).then((function(){s(a),O(!1)}))}),1500),e.abrupt("return",(function(){return clearTimeout(i)}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(q.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===v){e.next=6;break}return M({user:"user",message:v}).then((function(){return W()})),e.abrupt("return",!0);case 6:S({valid:!1,errorMessage:"Can`t be blank"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){fetch("mockAnswer.json",{headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){b(e.answers)})),T()}),[]),Object(r.useEffect)((function(){n.current.scrollIntoView({behavior:"smooth"})}),[o]),Object(a.jsxs)(le.a,{maxWidth:"md",children:[Object(a.jsxs)(y.a,{variant:"h6",className:e.title,children:["Begining of the chat ",t]}),Object(a.jsxs)(R.a,{container:!0,className:e.root,children:[function(e){return e.length>0?e.map((function(e,t){return Object(a.jsx)(ue,{message:e},t)})):null}(o),f?Object(a.jsx)(L.a,{}):null,Object(a.jsx)("span",{ref:n})]}),Object(a.jsx)(z.a,{className:e.chatControl,children:Object(a.jsxs)(R.a,{container:!0,className:e.formWrapper,children:[Object(a.jsx)(R.a,{item:!0,xs:1,children:Object(a.jsx)(G.a,{color:"secondary",endIcon:Object(a.jsx)(be.a,{}),onClick:function(){return B.replace("/chats")},className:e.button})}),Object(a.jsx)(R.a,{item:!0,xs:!0,children:Object(a.jsx)("form",{className:e.root,autoComplete:"off",onSubmit:function(e){return I(e)},children:Object(a.jsx)(Y.a,{error:!N.valid,id:"outlined-basic",label:N.valid?"Enter Your Message":N.errorMessage,variant:"outlined",value:v,onChange:function(e){S(pe),w(e.target.value)}})})}),Object(a.jsx)(R.a,{item:!0,xs:1,children:Object(a.jsx)(G.a,{color:"primary",className:e.button,size:"large",endIcon:Object(a.jsx)(je.a,{}),onClick:function(e){return I(e)}})})]})})]})},fe=Object(O.a)((function(e){return{root:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(4),padding:e.spacing(2),width:"100%"}},button:{marginTop:e.spacing(6),marginBottom:e.spacing(4)},alert:{color:"tomato"}}})),Oe=function(e){var t=e.name,n=p(),r=fe(),c=Object(d.g)();return Object(a.jsx)("div",{className:r.root,children:Object(a.jsxs)(z.a,{children:[Object(a.jsxs)(y.a,{variant:"h2",gutterBottom:!0,children:["Welcome",Object(a.jsx)("span",{children:t?": ".concat(t):""})]}),n.user?Object(a.jsx)(y.a,{variant:"subtitle1",gutterBottom:!0,children:"It's been a while since your last visit. Start chating stright away, click on the button bellow."}):Object(a.jsxs)(y.a,{variant:"subtitle1",gutterBottom:!0,children:["It might be that you're visiting the app for the first time. Sigh in (any email you have) by clickicking on the button bellow. Your special secret code: ",Object(a.jsx)("span",{className:r.alert,children:'"buba"'})]}),Object(a.jsx)(G.a,{className:r.button,variant:"contained",color:"primary",onClick:function(){c.replace("/chats")},children:"See the Chats List"})]})})},xe=function(){var e=p(),t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],i=n[1],o=function(){var t=Object(q.a)(E.a.mark((function t(){var n;return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.user){t.next=5;break}return t.next=3,P.table("profile").where("id").equalsIgnoreCase(e.user).toArray();case 3:n=t.sent,i(n[0].name);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){o()}),[]),Object(a.jsx)(Oe,{name:c})},ge=n(367),ve=n(366),ye=n(369),we=Object(O.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),ke=function(){var e=we(),t=Object(r.useState)(""),n=Object(l.a)(t,2),c=n[0],i=n[1],o=Object(r.useState)(""),s=Object(l.a)(o,2),u=s[0],j=s[1],h=Object(d.g)(),b=Object(d.h)(),m=p(),f=(b.state||{from:{pathname:"/"}}).from,O=function(){var e=Object(q.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.signin(t,n,Object(q.a)(E.a.mark((function e(){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.table("profile").where("id").equalsIgnoreCase(t).toArray();case 2:n=e.sent,a=n.length>0,P.profile.put({id:t,name:a?n[0].name:""}).then((function(){return h.replace(f)}));case 5:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=function(){return Object(a.jsxs)(y.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(ve.a,{color:"inherit",href:"/",children:"Philosopher desk"})," ",U()().format("YYYY"),"."]})};return Object(a.jsxs)(le.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(ge.a,{}),Object(a.jsxs)("div",{className:e.paper,children:[Object(a.jsx)(ce.a,{className:e.avatar,children:Object(a.jsx)(B.a,{})}),Object(a.jsx)(y.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(a.jsxs)("form",{className:e.form,noValidate:!0,onSubmit:function(e){e.preventDefault(),O(c,u)},children:[Object(a.jsx)(Y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:c,onChange:function(e){return i(e.target.value)}}),Object(a.jsx)(Y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",value:u,onChange:function(e){return j(e.target.value)},autoComplete:"current-password"}),Object(a.jsx)(G.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",disabled:!(c.length>0&&u.length>0),className:e.submit,children:"Sign In"})]})]}),Object(a.jsx)(ye.a,{mt:4,children:Object(a.jsx)(x,{})})]})},Ce=Object(O.a)((function(e){return{root:{display:"flex",flexWrap:"wrap","& > *":{margin:e.spacing(4),padding:e.spacing(2),width:"100%"}},button:{marginTop:e.spacing(6),marginBottom:e.spacing(4)},error:{color:"tomato"}}})),Ne=function(){var e=Ce(),t=Object(d.g)(),n=Object(d.h)();return Object(a.jsx)("div",{className:e.root,children:Object(a.jsxs)(z.a,{children:[Object(a.jsxs)(y.a,{variant:"h2",gutterBottom:!0,children:["Page not found ",Object(a.jsx)("span",{className:e.error,children:"404"})]}),Object(a.jsxs)(y.a,{variant:"subtitle1",gutterBottom:!0,children:[" No match for ",Object(a.jsxs)("span",{className:e.error,children:["..",n.pathname]})]}),Object(a.jsx)(G.a,{className:e.button,variant:"contained",color:"primary",onClick:function(){t.replace("/chats")},children:"Back to main page"})]})})},Se=Object(O.a)((function(e){return{root:{marginTop:"70px",marginBottom:"100px"}}})),Be=function(e){var t=e.children,n=Object(u.a)(e,["children"]),r=p();return Object(a.jsx)(d.b,Object(s.a)(Object(s.a)({},n),{},{render:function(e){var n=e.location;return r.user?t:Object(a.jsx)(d.a,{to:{pathname:"/login",state:{from:n}}})}}))},Te=function(){var e=Se();return Object(a.jsx)(b,{children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(I,{}),Object(a.jsx)(R.a,{container:!0,justify:"center",className:e.root,children:Object(a.jsx)(R.a,{item:!0,xs:12,children:Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{exact:!0,path:"/",children:Object(a.jsx)(xe,{})}),Object(a.jsx)(d.b,{path:"/login",children:Object(a.jsx)(ke,{})}),Object(a.jsx)(Be,{path:"/chats/:id",children:Object(a.jsx)(me,{})}),Object(a.jsx)(Be,{path:"/chats",children:Object(a.jsx)(re,{})}),Object(a.jsx)(Be,{path:"/profile",children:Object(a.jsx)(F,{})}),Object(a.jsx)(Be,{path:"/philosopher-desk",children:Object(a.jsx)(xe,{})}),Object(a.jsx)(Be,{path:"*",children:Object(a.jsx)(Ne,{})})]})})})]})})};o.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(m.a,{children:Object(a.jsx)(Te,{})})}),document.getElementById("root"))}},[[300,1,2]]]);
//# sourceMappingURL=main.0dcae5c7.chunk.js.map